# This file is generated by avanti, all changes will be overwritten
# Place your custom settings in the "/etc/apache2/avanti/{{name}}.conf" file

<VirtualHost *:{{port}}>
    ServerName {{name}}
    {{#if alias}}
    ServerAlias{{#each alias}} {{.}}{{/each}}
    {{/if}}

    DocumentRoot {{documentRoot}}

    ErrorLog "|/usr/bin/cronolog {{logsFolder}}/error.log-%Y%m%d"
    CustomLog "|/usr/bin/cronolog {{logsFolder}}/access.log-%Y%m%d" combined

    <FilesMatch ".+\.php$">
        SetHandler "proxy:unix:/run/php/{{user}}.sock|fcgi://{{name}}"
    </FilesMatch>

    <Proxy "fcgi://{{name}}">
        ProxySet connectiontimeout=5 timeout=30
    </Proxy>

    <Directory "{{documentRoot}}">
        AllowOverride All
    </Directory>

    Include /etc/apache2/avanti/{{name}}.conf
</VirtualHost>
